<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Stocks</title>
</head>
<body>
<div>
    <h1>Stocks</h1>
    <h2><a href="/">Home</a></h2>
</div>
<br>
<!--Adding Stock form-->
<div  th:if="${stock}">
    <h2>Add Stock</h2>
    <!--/*@thymesVar id="stock" type="db.project.wholesalemanage.Model.Stock"*/-->
    <form action="#" th:action="@{/stock/add}" method="post" th:object="${stock}">
        <p><label>Name: </label><input type="text" th:field="*{name}"></p>
        <p><label>Quantity:</label><input type="number" th:field="*{quantity}"></p>
        <p><label>Cost Price:</label> <input type="number" th:field="*{costPrice}" ></p>
        <p><label>Selling Price:</label> <input type="number" th:field="*{sellingPrice}"></p>
        <input type="submit" value="Submit">
    </form>
</div>

<br>
<div th:if="!${stocks}">
    <h2>View All Stocks</h2>
    <p><a href="/stock/all">View</a></p>
</div>
<!--All Stocks-->
<div th:if="${stocks}">
    <h2>Show Stocks</h2>
    <br>
    <table>
        <thead>
            <th>Stock</th>
            <th>Quantity</th>
            <th>Cost Price</th>
            <th>Selling Price</th>
        </thead>
        <th:block th:each="stock: ${stocks}">
            <tr >
                <!--/*@thymesVar id="stock" type="db.project.wholesalemanage.Model.Stock"*/-->
                <td th:text="${stock.name}"></td>
                <td th:text="${stock.quantity}"></td>
                <td th:text="${stock.costPrice}"></td>
                <td th:text="${stock.sellingPrice}"></td>
            </tr>
        </th:block>
    </table>
</div>

<div>
    <h2>Search Stock</h2>
    <form id="searchStock" action="" th:action="@{/stock}" onsubmit="searchFunction()">
        <label>Stock Name: <input type="text"name="stock_name" id="stock_name"></label>
        <input type="submit" value="Submit">
    </form>
    <script !src="">
        <!--        Function used to append the emergency quantity to the uri -->
        function searchFunction(){
            var action_src = "/stock/" + document.getElementsByName("stock_name")[0].value;
            var your_form = document.getElementById('searchStock');
            your_form.action = action_src ;
        }
    </script>
</div>
<!--Stock Info-->
<div th:if="${stockinfo}">
    <h3>Stock info</h3>
    <p th:text="${stockinfo.name}"></p>
    <p th:text="${stockinfo.quantity}"></p>
    <p th:text="${stockinfo.costPrice}"></p>
    <p th:text="${stockinfo.sellingPrice}"></p>
</div>


<div>
    <h3>Get Emergency Stock</h3>
    <br>
    <form id="emergencyQuery"action="" th:action="@{/stock/emergency/}" method="get" onsubmit="yourFunction()">
        <p>Stock quantitiy under:</p>
        <input type="number" name="quantity">
        <input type="submit" value="Submit">
    </form>
    <script !src="">
<!--        Function used to append the emergency quantity to the uri -->
        function yourFunction(){
            var action_src = "/stock/emergency/" + document.getElementsByName("quantity")[0].value;
            var your_form = document.getElementById('emergencyQuery');
            your_form.action = action_src ;
        }
    </script>
</div>

<!--Emergency Stock-->
<div th:if="${emergencystocks}">
    <h2>Emergency Stocks</h2>
    <table>
        <th:block th:each="stock: ${emergencystocks}">
            <tr >
                <!--/*@thymesVar id="stock" type="db.project.wholesalemanage.Model.Stock"*/-->
                <td th:text="${stock.name}"></td>
                <td th:text="${stock.quantity}"></td>
                <td th:text="${stock.costPrice}"></td>
                <td th:text="${stock.sellingPrice}"></td>
            </tr>
        </th:block>
    </table>

</div>

</body>
</html>